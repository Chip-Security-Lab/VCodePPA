Variable-width shifter with masking