PWM encoder and decoder circuit