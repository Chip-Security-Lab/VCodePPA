DRAM memory controller state machine