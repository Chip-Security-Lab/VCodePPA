Pipelined multimode timer with counter