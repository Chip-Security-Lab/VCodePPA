Circular buffer with auto shift