Pipelined FSM clock gating controller