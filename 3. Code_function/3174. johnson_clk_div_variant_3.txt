Johnson counter with handshaking protocol