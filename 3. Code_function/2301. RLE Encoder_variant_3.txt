Run-length encoder with pipeline