USB speed detection state machine