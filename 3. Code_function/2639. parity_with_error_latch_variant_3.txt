Error detection with handshaking protocol