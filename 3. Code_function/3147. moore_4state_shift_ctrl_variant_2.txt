Pipelined shift controller state machine