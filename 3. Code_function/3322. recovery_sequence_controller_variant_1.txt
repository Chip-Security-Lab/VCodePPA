System recovery state machine controller