Pipelined dual-port ROM with handshaking