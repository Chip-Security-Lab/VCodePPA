Pipelined Gray counter with handshake