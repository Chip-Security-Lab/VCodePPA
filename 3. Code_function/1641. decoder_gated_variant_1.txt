Gated decoder with FSM control