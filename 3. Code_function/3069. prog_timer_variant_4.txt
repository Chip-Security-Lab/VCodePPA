Programmable multi-mode timer with PWM