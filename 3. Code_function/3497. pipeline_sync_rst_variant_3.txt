Five-stage pipeline with flow control