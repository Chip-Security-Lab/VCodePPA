Pattern matching using lookup table