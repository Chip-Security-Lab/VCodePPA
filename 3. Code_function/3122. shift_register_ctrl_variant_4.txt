Configurable shift register state machine