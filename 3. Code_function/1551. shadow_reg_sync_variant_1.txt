Registered buffer with shadow storage