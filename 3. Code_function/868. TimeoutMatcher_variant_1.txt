Pattern matching with timeout counter