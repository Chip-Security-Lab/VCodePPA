Configurable PWM generator with pipeline