Directional priority encoder with selection