Negative-edge shift register with counters