Pattern detector with timeout counter