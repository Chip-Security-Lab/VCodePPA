Address-based decoder with FSM