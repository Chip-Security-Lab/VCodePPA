Four-stage pipeline with valid/ready