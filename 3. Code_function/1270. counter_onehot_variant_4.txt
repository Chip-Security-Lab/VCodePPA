Pipelined one-hot state counter