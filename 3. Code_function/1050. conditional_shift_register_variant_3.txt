Conditional multi-mode shift register