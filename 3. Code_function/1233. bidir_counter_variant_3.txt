Bidirectional counter with lookup table