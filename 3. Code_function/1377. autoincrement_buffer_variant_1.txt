FIFO buffer with handshaking protocol