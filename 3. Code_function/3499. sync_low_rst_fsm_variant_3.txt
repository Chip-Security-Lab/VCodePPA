Pipelined trigger-based finite state machine