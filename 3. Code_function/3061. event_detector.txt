Pattern sequence detector state machine