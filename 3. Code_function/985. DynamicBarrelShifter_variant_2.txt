Barrel shifter with difference calculation