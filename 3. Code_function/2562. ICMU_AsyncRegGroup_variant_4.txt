Context-switching register save/restore controller