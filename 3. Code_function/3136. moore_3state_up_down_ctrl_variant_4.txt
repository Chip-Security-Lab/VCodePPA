Moore FSM up/down direction controller