Circular buffer with shadow registers