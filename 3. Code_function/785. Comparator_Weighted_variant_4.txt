Weighted vector comparison state machine