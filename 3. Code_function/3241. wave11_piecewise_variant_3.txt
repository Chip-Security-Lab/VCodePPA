Five-state piecewise waveform generator