Dynamic multi-mode shift register