Configurable pulse generator with counter