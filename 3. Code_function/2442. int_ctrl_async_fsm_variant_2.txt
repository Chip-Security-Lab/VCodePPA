Pipelined interrupt controller with FSM