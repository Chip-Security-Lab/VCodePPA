Pattern match counter with pipeline