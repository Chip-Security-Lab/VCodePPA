Rotating one-hot counter with buffers