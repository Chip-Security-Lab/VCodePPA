ECC decoder with error detection