Segmented equality comparison with masking