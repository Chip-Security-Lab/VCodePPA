Bidirectional barrel shifter with register