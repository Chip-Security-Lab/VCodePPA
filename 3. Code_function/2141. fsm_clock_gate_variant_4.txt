Pipelined clock gating FSM controller