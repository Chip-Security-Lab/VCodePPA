Four-stage reset synchronization pipeline