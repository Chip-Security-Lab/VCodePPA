Multi-mode timer with pipelined design