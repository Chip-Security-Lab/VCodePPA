USB data transfer state machine