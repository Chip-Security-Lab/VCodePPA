Gated priority encoder with pipeline