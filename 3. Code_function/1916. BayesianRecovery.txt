Bayesian noise filter using history