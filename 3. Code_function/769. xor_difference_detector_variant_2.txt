Pattern difference detector with metrics