Traffic light controller state machine