Four-stage pipelined CPU controller