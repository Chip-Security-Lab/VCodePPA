Data buffer with handshaking protocol