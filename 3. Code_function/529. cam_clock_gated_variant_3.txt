Pipelined content-addressable memory with gating