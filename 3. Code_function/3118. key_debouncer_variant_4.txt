Keyboard debouncer with state machine