USB speed negotiation state machine