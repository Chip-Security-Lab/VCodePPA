Pipelined counter with handshake protocol