Threshold comparator with state memory