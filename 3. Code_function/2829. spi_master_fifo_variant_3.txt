Pipelined SPI master with FIFOs