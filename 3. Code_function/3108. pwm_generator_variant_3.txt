Configurable PWM generator with modes