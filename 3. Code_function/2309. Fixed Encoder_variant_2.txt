Encoder with handshaking protocol implementation