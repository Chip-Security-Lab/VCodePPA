Pattern detector with masked comparison