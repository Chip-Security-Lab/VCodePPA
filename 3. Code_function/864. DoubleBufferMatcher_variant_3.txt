Pattern matcher with selectable buffer