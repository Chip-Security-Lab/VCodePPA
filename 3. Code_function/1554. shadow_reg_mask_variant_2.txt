Masked register with shadow storage