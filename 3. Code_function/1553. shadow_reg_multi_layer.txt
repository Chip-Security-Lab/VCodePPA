Circular buffer with parametrized depth