Moore FSM with branching paths