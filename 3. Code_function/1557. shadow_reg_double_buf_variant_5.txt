Double-buffered register with handshaking