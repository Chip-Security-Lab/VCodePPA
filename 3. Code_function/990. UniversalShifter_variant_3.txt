Universal multi-mode shift register