Weighted priority encoder with register