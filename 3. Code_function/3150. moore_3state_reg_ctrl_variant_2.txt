Three-stage pipelined Moore FSM controller