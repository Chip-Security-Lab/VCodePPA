Equality comparator with history buffer