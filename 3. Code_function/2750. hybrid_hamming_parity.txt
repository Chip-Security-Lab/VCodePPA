Hybrid error-correction data encoder