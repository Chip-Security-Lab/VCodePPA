XOR-OR gate with optimizations