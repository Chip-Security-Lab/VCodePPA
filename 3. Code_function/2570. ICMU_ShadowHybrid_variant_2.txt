Shadow-based register backup system