Triggered shadow register with FSM