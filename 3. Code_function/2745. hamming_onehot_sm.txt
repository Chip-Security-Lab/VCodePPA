Hamming encoder with state machine